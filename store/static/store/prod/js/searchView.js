function updateUi(){function e(){document.querySelectorAll(".cart_btn").forEach(t=>{t.innerHTML='<i class="fab fa-opencart fa-lg"></i> View Cart'}),document.querySelector("#heart-cart").classList.remove("hover:tw-text-red-500","hover:tw-border-yellow-400","tw-text-red-300","tw-border-gray-300"),document.querySelector("#heart-cart").classList.add("tw-text-red-500","tw-border-yellow-400")}if(userId||customerId)e();else{let t=window.location.pathname.split("/").filter(t=>""!=t);t.includes("normal")?(pid=t[2],cart.prodList.includes(pid)&&(e(),document.querySelector("#heart-cart").setAttribute("data-action","view_cart"))):t.includes("variable")&&(pid=t[2],vid=t[3],cart.varList.includes(vid)&&(e(),document.querySelector("#heart-cart").setAttribute("data-action","view_cart")))}}function addToCart(t){let e=t.target;"add"===e.getAttribute("data-action")?(itemDetails=new Object,currentPath.includes("normal")?(itemDetails.productId=currentPath[2],itemDetails.variantId=null,itemDetails.ptype="normal",itemDetails.quantity=1<=parseInt(document.getElementById("product_quantity_lg").value)?document.getElementById("product_quantity_lg").value:1,itemDetails.time=String((new Date).getTime()).slice(0,10)):currentPath.includes("variable")&&(itemDetails.productId=currentPath[2],itemDetails.variantId=currentPath[3],itemDetails.ptype="variable",itemDetails.quantity=1<=parseInt(document.getElementById("product_quantity_lg").value)?document.getElementById("product_quantity_lg").value:1,itemDetails.time=String((new Date).getTime()).slice(0,10)),console.log(itemDetails),userId&&customerId?(fetch("/additemtocart/",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json","X-CSRFToken":csrftoken},body:JSON.stringify(itemDetails)}).then(t=>{console.log(t),1==t.ok&&(e.setAttribute("data-action","view_cart"),updateUi())}).catch(t=>{alert(t.message)}),console.log("Sending")):"normal"===currentPath[1]?!1===cart.prodList.includes(itemDetails.productId)?(cart.prodList.push(`${itemDetails.productId}`),cart.cartItems.push(itemDetails),localStorage.setItem("cart",JSON.stringify(cart)),console.log("Saved In LocalStorage"),e.setAttribute("data-action","view_cart"),updateUi()):(console.log("Item already in cart!"),window.location.href=`${window.location.origin}/view/cart`):"variable"===currentPath[1]&&(!1===cart.varList.includes(itemDetails.variantId)?(cart.varList.push(`${itemDetails.variantId}`),cart.cartItems.push(itemDetails),localStorage.setItem("cart",JSON.stringify(cart)),console.log("Saved In LocalStorage"),e.setAttribute("data-action","view_cart"),updateUi()):(console.log("Item already in cart!"),window.location.href=`${window.location.origin}/view/cart`))):userId&&customerId?(console.log("[authed]going to cart page"),window.location.href=`${window.location.origin}/view/cart`):updateQueryPrams()}document.querySelector("#mainSearchBar_pc_btn").addEventListener("click",function(t){t.preventDefault(),console.log("clicked"),""!==document.querySelector("#mainSearchBar_pc").value&&document.querySelector("#mainSearchBar_pc").submit()}),document.querySelector("#mainSearchBar_mob_btn").addEventListener("click",function(){console.log("clicked")," "===document.querySelector("#mainSearchBar_mob").value&&""===document.querySelector("#mainSearchBar_mob").value||document.querySelector("#mainSearchBar_mob").submit()}),userId||customerId||updateUi(),document.querySelectorAll(".cart_btn").forEach(t=>{t.addEventListener("click",t=>{addToCart(t)})});